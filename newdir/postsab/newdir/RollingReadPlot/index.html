
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta property="og:title" content="Data Collection" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="postsab/newdir/RollingReadPlot/" />
  
<meta property="og:description" content="For the rolling plot, we start from the year-based. The file on Dropbox must contain ALL the dates of the year Book separation and metadata are hardcoded here (for the moment), as the layout All th..." />
  
    <title>Data Collection &#8212; Non-Abelian Journey</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'postsab/newdir/RollingReadPlot';</script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="None">  
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../../search/" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this site..." aria-label="Search this site..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fas fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">Non-Abelian Journey</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../../../about/">
                        About me
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../../ds_posts/">
                        DS Posts
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../../other_posts/">
                        Other Posts
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../../test/">
                        test
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/scipio1465/" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://twitter.com/DrBocci" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://www.linkedin.com/in/andreab2" title="linkedin" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-linkedin"></i></span>
            <label class="sr-only">linkedin</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://stackoverflow.com/users/10557156/scipio1465" title="StackOverflow" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-stack-overflow"></i></span>
            <label class="sr-only">StackOverflow</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fas fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../../../about/">
                        About me
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../../ds_posts/">
                        DS Posts
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../../other_posts/">
                        Other Posts
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../../test/">
                        test
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/scipio1465/" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://twitter.com/DrBocci" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://www.linkedin.com/in/andreab2" title="linkedin" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-linkedin"></i></span>
            <label class="sr-only">linkedin</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://stackoverflow.com/users/10557156/scipio1465" title="StackOverflow" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-stack-overflow"></i></span>
            <label class="sr-only">StackOverflow</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
    </div>
    <div class="sidebar-start-items__item">
<h3>
  <a href="../../../test/category/">Categories</a>
</h3>
<ul>
   
  <li>
    <a href="../../../test/category/cat1/">cat1 (1)</a>
  </li>
    
  <li>
    <a href="../../../test/category/cat2/">cat2 (1)</a>
  </li>
    
  <li>
    <a href="../../../test/category/notebook_ab/">notebook_ab (1)</a>
  </li>
    
  <li>
    <a href="../../../test/category/test/">test (1)</a>
  </li>
   
</ul>

    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            

            <article class="bd-article" role="main">
               <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="data-collection">
<h1>Data Collection<a class="headerlink" href="#data-collection" title="Permalink to this headline">#</a></h1>
<p>For the rolling plot, we start from the year-based.</p>
<p>The file on Dropbox must contain ALL the dates of the year</p>
<p>Book separation and metadata are hardcoded here (for the moment), as the layout</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read file</span>
<span class="n">dir_path</span> <span class="o">=</span> <span class="s1">&#39;./data/&#39;</span>
<span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;rolling_data.csv&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dir_path</span><span class="o">+</span><span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>All the code from below this point should work from Azure function</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## read from dropbox</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://www.dropbox.com/s/g7875nncfon1tli/rolling_data.txt?dl=1&quot;</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hardcoded-book-metadata">
<h2>Hardcoded book metadata<a class="headerlink" href="#hardcoded-book-metadata" title="Permalink to this headline">#</a></h2>
<p>Inputs:</p>
<ul class="simple">
<li><p>initial page of the book</p></li>
<li><p>date of beginning of the book</p></li>
<li><p>Author of the book</p></li>
<li><p>title of the book</p></li>
</ul>
<p>Can be done with a dictionary, and incrementally added to a dataframe</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## First Book</span>

<span class="n">book</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2022-01-25&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;D. Da Silva&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Mia Suocera Beve&#39;</span>

<span class="n">dfmeta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">book</span><span class="p">])</span>

<span class="c1">## Additional Book</span>

<span class="n">book</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2022-05-12&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;D. Da Silva&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Sono Contrario</span><span class="se">\n</span><span class="s1"> Alle Emozioni&#39;</span>

<span class="n">df_book</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">book</span><span class="p">])</span>
<span class="n">dfmeta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dfmeta</span><span class="p">,</span> <span class="n">df_book</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">## Additional Book</span>

<span class="n">book</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2022-05-19&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;D. Da Silva&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Divorziare Con Stile&#39;</span>

<span class="n">df_book</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">book</span><span class="p">])</span>
<span class="n">dfmeta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dfmeta</span><span class="p">,</span> <span class="n">df_book</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">## Additional Book</span>

<span class="n">book</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2022-06-30&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;E. Viola&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;L</span><span class="se">\&#39;</span><span class="s1">Amore e</span><span class="se">\&#39;</span><span class="s1"> Eterno</span><span class="se">\n</span><span class="s1"> Finche</span><span class="se">\&#39;</span><span class="s1"> Non Risponde&#39;</span>
<span class="n">df_book</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">book</span><span class="p">])</span>
<span class="n">dfmeta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dfmeta</span><span class="p">,</span> <span class="n">df_book</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">## Additional Book</span>

<span class="n">book</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2022-07-10&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;C. Dickens&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Hard Times&#39;</span>

<span class="n">df_book</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">book</span><span class="p">])</span>
<span class="n">dfmeta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dfmeta</span><span class="p">,</span> <span class="n">df_book</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">## Additional Book</span>

<span class="n">book</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;2022-08-06&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;C. Dickens&#39;</span>
<span class="n">book</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Great Expectations&#39;</span>

<span class="n">df_book</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">book</span><span class="p">])</span>
<span class="n">dfmeta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dfmeta</span><span class="p">,</span> <span class="n">df_book</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">dfmeta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>InitPage</th>
      <th>InitDate</th>
      <th>Author</th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3</td>
      <td>2022-01-25</td>
      <td>D. Da Silva</td>
      <td>Mia Suocera Beve</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>2022-05-12</td>
      <td>D. Da Silva</td>
      <td>Sono Contrario\n Alle Emozioni</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>2022-05-19</td>
      <td>D. Da Silva</td>
      <td>Divorziare Con Stile</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>2022-06-30</td>
      <td>E. Viola</td>
      <td>L'Amore e' Eterno\n Finche' Non Risponde</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7</td>
      <td>2022-07-10</td>
      <td>C. Dickens</td>
      <td>Hard Times</td>
    </tr>
    <tr>
      <th>5</th>
      <td>3</td>
      <td>2022-08-06</td>
      <td>C. Dickens</td>
      <td>Great Expectations</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="complete-the-raw-dataset">
<h2>Complete the raw dataset<a class="headerlink" href="#complete-the-raw-dataset" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Forward fill for nan</p></li>
<li><p>Add zeros for remaining nan</p></li>
<li><p>Add offset of book beginning</p></li>
<li><p>Calculate new page count</p></li>
<li><p>floor to zero any negative page</p></li>
<li><p>All zero from tomorrow</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">## Add offset from metadata</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dfmeta</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">dd</span> <span class="o">=</span> <span class="n">dfmeta</span><span class="p">[</span><span class="s1">&#39;InitDate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
    <span class="n">pp</span> <span class="o">=</span> <span class="n">dfmeta</span><span class="p">[</span><span class="s1">&#39;InitPage&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
    <span class="n">ff</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dt</span> <span class="o">&gt;=</span> <span class="n">dd</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff</span><span class="p">,</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span>
    <span class="c1">## Check if the start of the new book is filled</span>
    <span class="n">ff0</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dt</span> <span class="o">==</span> <span class="n">dd</span>
    <span class="n">p0</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff0</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1">## if not filled it needs to be set to offset (for ffill)</span>
    <span class="k">if</span> <span class="o">~</span><span class="p">(</span><span class="n">p0</span><span class="o">&gt;-</span><span class="mi">1</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-----&gt;&#39;</span><span class="p">,</span><span class="n">dd</span><span class="p">,</span> <span class="n">pp</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">ff</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff0</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff0</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">pp</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">ff</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

<span class="c1">## forward fill</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;page&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">## new page count</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;page1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;page&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span>

<span class="c1">## floor to zero negatives</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">page1</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff</span><span class="p">,</span> <span class="s1">&#39;page1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">## All zero from tomorrow</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;today&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dt</span> <span class="o">&gt;</span> <span class="n">today</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff</span><span class="p">,</span> <span class="s1">&#39;page1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ff</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>


<span class="c1">## rename columns</span>
<span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page&#39;</span><span class="p">:</span><span class="s1">&#39;page_orig&#39;</span><span class="p">,</span> <span class="s1">&#39;page1&#39;</span><span class="p">:</span><span class="s1">&#39;page&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-01-25 3 3.0 341
2022-05-12 3 5.0 234
-----&gt; 2022-05-19 3 nan 227
2022-05-19 3 0.0 227
2022-06-30 3 15.0 185
2022-07-10 7 7.0 175
2022-08-06 3 308.0 148
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="make-the-plot">
<h1>Make the plot<a class="headerlink" href="#make-the-plot" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib.dates</span> <span class="kn">import</span> <span class="n">DateFormatter</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;dt&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>page_orig</th>
      <th>offset</th>
      <th>page</th>
    </tr>
    <tr>
      <th>dt</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-01-25</th>
      <td>2022-01-25</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-01-26</th>
      <td>2022-01-26</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-01-27</th>
      <td>2022-01-27</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-01-28</th>
      <td>2022-01-28</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-01-29</th>
      <td>2022-01-29</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-12-27</th>
      <td>2022-12-27</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-12-28</th>
      <td>2022-12-28</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-12-29</th>
      <td>2022-12-29</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-12-30</th>
      <td>2022-12-30</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-12-31</th>
      <td>2022-12-31</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>341 rows × 4 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Restrict the plots up to 1 week after tomorrow</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;today&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="n">date_threshold</span> <span class="o">=</span> <span class="n">today</span>  <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">date_threshold</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2022-10-04 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[:</span><span class="n">date_threshold</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;dt&#39;&gt;
</pre></div>
</div>
<img alt="../../../_images/7ca8db225cfdcd614c569ada02a5367427aa928cf13a5727839687619d0a10b4.png" src="../../../_images/7ca8db225cfdcd614c569ada02a5367427aa928cf13a5727839687619d0a10b4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#last_row = [7, &#39;2021-06-18&#39;, &#39;2021-09-21&#39;, 451, &#39;Time Regained&#39;]</span>

<span class="c1">## create dfadd</span>
<span class="c1">#df_extra = pd.DataFrame(np.array([last_row]), columns = df_meta.columns)</span>

<span class="c1">#df_meta = pd.concat([df_meta, df_extra], axis=0)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">SetTit</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">tt</span><span class="o">=</span><span class="s1">&#39;ippo&#39;</span><span class="p">):</span>
     <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1">## vol1</span>
<span class="k">def</span> <span class="nf">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-02-01&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-02-20&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">do_arrow</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    
    <span class="c1">## posiion title relative</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">y_pos_btit</span> <span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="n">y_pos_aut</span> <span class="o">+</span> <span class="n">y_pos_btit</span>
    
    <span class="n">aut</span><span class="p">,</span> <span class="n">btit</span> <span class="o">=</span> <span class="n">GetNames</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">aut</span><span class="p">,</span> <span class="n">btit</span><span class="p">)</span>
    
    <span class="c1">## author</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">aut</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x_pos_text</span><span class="p">,</span><span class="n">y_pos_aut</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">size_aut</span><span class="p">)</span>
    <span class="c1">#x_pos = x_pos</span>
    <span class="c1">#_pos = y_pos_text</span>
    <span class="c1">## - book text</span>
    <span class="c1">#ax.annotate(f&#39;&quot;{btit}&quot;&#39;, xy=(x_pos,y_pos-10), fontsize=25)</span>
    
    <span class="c1">## Another kind with arrow - </span>
    <span class="c1">## https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.annotate.html</span>
    <span class="c1">## https://matplotlib.org/stable/tutorials/text/annotations.html</span>
    <span class="k">if</span> <span class="n">do_arrow</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
         <span class="c1">#&#39;THE DAY I REALIZED\nI COULD COOK BACON\nWHENEVER I WANTED&#39;,</span>
        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">btit</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">size_btit</span><span class="p">,</span>
        <span class="c1">#xycoords=&#39;axes fraction&#39;, ## specify coord system</span>
        <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x_pos_end</span><span class="p">,</span> <span class="n">y_pos_end</span><span class="p">),</span> <span class="c1">## endpoint arrrow</span>
        <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="n">x_pos_text</span><span class="p">,</span> <span class="n">y_pos_btit</span><span class="p">),</span> <span class="c1">## text point</span>
        <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">),</span> <span class="c1">## (text) -&gt; (endpoint)</span>
        <span class="c1">#xy=(0.35, 0.11), </span>
        <span class="c1">#arrowprops=dict(arrowstyle=&#39;-&gt;&#39;, connectionstyle=&quot;angle3,angleA=90,angleB=0&quot;), </span>
        <span class="c1">#xytext=(0.4, 0.25)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
         <span class="c1">#&#39;THE DAY I REALIZED\nI COULD COOK BACON\nWHENEVER I WANTED&#39;,</span>
        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">btit</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">size_btit</span><span class="p">,</span>
        <span class="c1">#xycoords=&#39;axes fraction&#39;, ## specify coord system</span>
        <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x_pos_end</span><span class="p">,</span> <span class="n">y_pos_end</span><span class="p">),</span> <span class="c1">## endpoint arrrow</span>
        <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="n">x_pos_text</span><span class="p">,</span> <span class="n">y_pos_btit</span><span class="p">),</span> <span class="c1">## text point</span>
        <span class="c1">#arrowprops=dict(arrowstyle=&#39;-&gt;&#39;), ## (text) -&gt; (endpoint)</span>
        <span class="c1">#xy=(0.35, 0.11), </span>
        <span class="c1">#arrowprops=dict(arrowstyle=&#39;-&gt;&#39;, connectionstyle=&quot;angle3,angleA=90,angleB=0&quot;), </span>
        <span class="c1">#xytext=(0.4, 0.25)</span>
        <span class="p">)</span>
        
        
        
    

<span class="k">def</span> <span class="nf">GetNames</span><span class="p">(</span><span class="n">ll</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> <span class="c1">## provide volume idx</span>
    <span class="n">aut</span> <span class="o">=</span> <span class="n">dfmeta</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ll</span><span class="p">,</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span>
    <span class="n">btit</span> <span class="o">=</span> <span class="n">dfmeta</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ll</span><span class="p">,</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">aut</span><span class="p">,</span> <span class="n">btit</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">aut</span><span class="p">,</span> <span class="n">btit</span>
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfmeta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>InitPage</th>
      <th>InitDate</th>
      <th>Author</th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3</td>
      <td>2022-01-25</td>
      <td>D. Da Silva</td>
      <td>Mia Suocera Beve</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>2022-05-12</td>
      <td>D. Da Silva</td>
      <td>Sono Contrario\n Alle Emozioni</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>2022-05-19</td>
      <td>D. Da Silva</td>
      <td>Divorziare Con Stile</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>2022-06-30</td>
      <td>E. Viola</td>
      <td>L'Amore e' Eterno\n Finche' Non Risponde</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7</td>
      <td>2022-07-10</td>
      <td>C. Dickens</td>
      <td>Hard Times</td>
    </tr>
    <tr>
      <th>5</th>
      <td>3</td>
      <td>2022-08-06</td>
      <td>C. Dickens</td>
      <td>Great Expectations</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">io</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">xkcd</span><span class="p">():</span>
    <span class="c1"># Based on &quot;Stove Ownership&quot; from XKCD by Randall Monroe</span>
    <span class="c1"># http://xkcd.com/418/</span>

    <span class="c1"># Some other good examples: </span>
    <span class="c1"># https://jakevdp.github.io/blog/2012/10/07/xkcd-style-plots-in-matplotlib/</span>
    <span class="c1"># https://matplotlib.org/xkcd/gallery.html</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
    <span class="c1">#plt.xticks([])</span>
    <span class="c1">#plt.yticks([])</span>
    <span class="c1">#ax.set_ylim([-30, 10])</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    
    <span class="c1">###----- VERTICAL LINES END/START BOOK</span>
    <span class="k">for</span> <span class="n">dd</span> <span class="ow">in</span> <span class="n">dfmeta</span><span class="o">.</span><span class="n">InitDate</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">)</span>
    
    <span class="n">ax</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
    
    <span class="c1">###---- VOLUME ANNOTATION</span>
    <span class="n">aut</span><span class="p">,</span> <span class="n">btit</span> <span class="o">=</span> <span class="n">GetNames</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="c1">## Another kind with arrow - </span>
    <span class="c1">## https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.annotate.html</span>
    <span class="c1">## https://matplotlib.org/stable/tutorials/text/annotations.html</span>
    
    
    <span class="n">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-02-20&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-04-10&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span><span class="n">do_arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-05-03&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">480</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-05-15&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span><span class="n">do_arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-05-20&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">13</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-06-15&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">110</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">do_arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-06-20&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">450</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-07-04&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">110</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span><span class="n">do_arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-07-10&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-07-31&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">210</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span><span class="n">do_arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">SetVolumeAnnotation</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">x_pos_text</span> <span class="o">=</span> <span class="s1">&#39;2022-08-15&#39;</span><span class="p">,</span> <span class="n">y_pos_aut</span> <span class="o">=</span> <span class="mi">450</span><span class="p">,</span> <span class="n">y_pos_btit</span> <span class="o">=</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="n">x_pos_end</span> <span class="o">=</span> <span class="s1">&#39;2022-08-15&#39;</span><span class="p">,</span> <span class="n">y_pos_end</span> <span class="o">=</span> <span class="mi">335</span><span class="p">,</span> <span class="n">size_aut</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">size_btit</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">do_arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    
    <span class="c1">###---- OVERALL FIGURE LAYOUT</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of Pages&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">500</span><span class="p">)</span>
    <span class="c1">#SetTit(ax)</span>
    <span class="c1">#SetTit(ax,&#39;Date&#39;)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    
    
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="c1">## rotation, etc... </span>
    
    <span class="c1"># Define the date format</span>
    <span class="n">date_form</span> <span class="o">=</span> <span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">date_form</span><span class="p">)</span>
    <span class="c1"># Ensure ticks fall once every other week (interval=2) </span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">WeekdayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

    <span class="c1">###----- OUTSIDE FIGURE ANNOTATION</span>
    <span class="n">tday</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today</span><span class="p">,</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> %B %Y&#39;</span><span class="p">)</span>
    <span class="n">tpage</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today</span><span class="p">,</span><span class="s1">&#39;page&#39;</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;Updated to </span><span class="si">{</span><span class="n">tday</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
    
    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;My 2022 Book Reading Log&quot;</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
    <span class="n">fig_file</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;fig_file&#39;</span><span class="p">)</span>
    <span class="c1">#fig.savefig(&#39;test.png&#39;)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2022-01-25
2022-05-12
2022-05-19
2022-06-30
2022-07-10
2022-08-06
D. Da Silva Mia Suocera Beve
D. Da Silva Mia Suocera Beve
D. Da Silva Mia Suocera Beve
D. Da Silva Sono Contrario
 Alle Emozioni
D. Da Silva Sono Contrario
 Alle Emozioni
D. Da Silva Divorziare Con Stile
D. Da Silva Divorziare Con Stile
E. Viola L&#39;Amore e&#39; Eterno
 Finche&#39; Non Risponde
E. Viola L&#39;Amore e&#39; Eterno
 Finche&#39; Non Risponde
C. Dickens Hard Times
C. Dickens Hard Times
C. Dickens Great Expectations
C. Dickens Great Expectations
</pre></div>
</div>
<img alt="../../../_images/2959edc5c02755d8bf850136490536148f7fc7c0b3c42af4d8db27e190526cdf.png" src="../../../_images/2959edc5c02755d8bf850136490536148f7fc7c0b3c42af4d8db27e190526cdf.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig_file</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;_io.BytesIO at 0x1ad70f510&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="p">[</span><span class="s1">&#39;2022-08&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_43874/1098416998.py:1: FutureWarning: Indexing a DataFrame with a datetimelike index using a single string to slice the rows, like `frame[string]`, is deprecated and will be removed in a future version. Use `frame.loc[string]` instead.
  df1[&#39;2022-08&#39;]
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>page_orig</th>
      <th>offset</th>
      <th>page</th>
    </tr>
    <tr>
      <th>dt</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-08-01</th>
      <td>2022-08-01</td>
      <td>228.0</td>
      <td>7</td>
      <td>221.0</td>
    </tr>
    <tr>
      <th>2022-08-02</th>
      <td>2022-08-02</td>
      <td>242.0</td>
      <td>7</td>
      <td>235.0</td>
    </tr>
    <tr>
      <th>2022-08-03</th>
      <td>2022-08-03</td>
      <td>254.0</td>
      <td>7</td>
      <td>247.0</td>
    </tr>
    <tr>
      <th>2022-08-04</th>
      <td>2022-08-04</td>
      <td>268.0</td>
      <td>7</td>
      <td>261.0</td>
    </tr>
    <tr>
      <th>2022-08-05</th>
      <td>2022-08-05</td>
      <td>284.0</td>
      <td>7</td>
      <td>277.0</td>
    </tr>
    <tr>
      <th>2022-08-06</th>
      <td>2022-08-06</td>
      <td>308.0</td>
      <td>3</td>
      <td>305.0</td>
    </tr>
    <tr>
      <th>2022-08-07</th>
      <td>2022-08-07</td>
      <td>8.0</td>
      <td>3</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>2022-08-08</th>
      <td>2022-08-08</td>
      <td>17.0</td>
      <td>3</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>2022-08-09</th>
      <td>2022-08-09</td>
      <td>26.0</td>
      <td>3</td>
      <td>23.0</td>
    </tr>
    <tr>
      <th>2022-08-10</th>
      <td>2022-08-10</td>
      <td>33.0</td>
      <td>3</td>
      <td>30.0</td>
    </tr>
    <tr>
      <th>2022-08-11</th>
      <td>2022-08-11</td>
      <td>45.0</td>
      <td>3</td>
      <td>42.0</td>
    </tr>
    <tr>
      <th>2022-08-12</th>
      <td>2022-08-12</td>
      <td>49.0</td>
      <td>3</td>
      <td>46.0</td>
    </tr>
    <tr>
      <th>2022-08-13</th>
      <td>2022-08-13</td>
      <td>49.0</td>
      <td>3</td>
      <td>46.0</td>
    </tr>
    <tr>
      <th>2022-08-14</th>
      <td>2022-08-14</td>
      <td>49.0</td>
      <td>3</td>
      <td>46.0</td>
    </tr>
    <tr>
      <th>2022-08-15</th>
      <td>2022-08-15</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>2022-08-16</th>
      <td>2022-08-16</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>2022-08-17</th>
      <td>2022-08-17</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>2022-08-18</th>
      <td>2022-08-18</td>
      <td>68.0</td>
      <td>3</td>
      <td>65.0</td>
    </tr>
    <tr>
      <th>2022-08-19</th>
      <td>2022-08-19</td>
      <td>81.0</td>
      <td>3</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>2022-08-20</th>
      <td>2022-08-20</td>
      <td>81.0</td>
      <td>3</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>2022-08-21</th>
      <td>2022-08-21</td>
      <td>81.0</td>
      <td>3</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>2022-08-22</th>
      <td>2022-08-22</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-08-23</th>
      <td>2022-08-23</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-08-24</th>
      <td>2022-08-24</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-08-25</th>
      <td>2022-08-25</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-08-26</th>
      <td>2022-08-26</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">today</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2022-08-21 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today</span><span class="p">,</span><span class="s1">&#39;page&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>62.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today</span><span class="p">,</span><span class="s1">&#39;dt&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2022-08-19 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aa</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">today</span><span class="p">,</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> %B %Y&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>19 August 2022
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">xkcd</span><span class="p">():</span>
    <span class="c1"># Based on &quot;Stove Ownership&quot; from XKCD by Randall Monroe</span>
    <span class="c1"># http://xkcd.com/418/</span>

    <span class="c1"># Some other good examples: </span>
    <span class="c1"># https://jakevdp.github.io/blog/2012/10/07/xkcd-style-plots-in-matplotlib/</span>
    <span class="c1"># https://matplotlib.org/xkcd/gallery.html</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
    <span class="c1">#plt.xticks([])</span>
    <span class="c1">#plt.yticks([])</span>
    <span class="c1">#ax.set_ylim([-30, 10])</span>

    <span class="c1">#data = np.ones(100)</span>
    <span class="c1">#data[70:] -= np.arange(30)</span>

    <span class="c1">#plt.annotate(</span>
    <span class="c1">#    &#39;THE DAY I REALIZED\nI COULD COOK BACON\nWHENEVER I WANTED&#39;,</span>
    <span class="c1">#    xy=(70, 1), arrowprops=dict(arrowstyle=&#39;-&gt;&#39;), xytext=(15, -10))</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">tot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1">## plot volume lines and name</span>
    <span class="n">title_x_positions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2019-08-01&#39;</span><span class="p">,</span><span class="s1">&#39;2018-12-01&#39;</span><span class="p">,</span><span class="s1">&#39;2019-08-01&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;2017-07-01&#39;</span><span class="p">,</span><span class="s1">&#39;2017-07-01&#39;</span><span class="p">,</span><span class="s1">&#39;2017-07-01&#39;</span><span class="p">,</span><span class="s1">&#39;2017-07-01&#39;</span><span class="p">]</span>
    <span class="n">prefix_title</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Vol I: &#39;</span><span class="p">,</span> <span class="s1">&#39;Vol II: &#39;</span><span class="p">,</span><span class="s1">&#39;Vol III: &#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Vol IV: &#39;</span><span class="p">,</span><span class="s1">&#39;Vol V: &#39;</span><span class="p">,</span><span class="s1">&#39;Vol VI: &#39;</span><span class="p">,</span><span class="s1">&#39;Vol VII: &#39;</span><span class="p">]</span>
    <span class="c1">#x = df_meta[&#39;Start_dt&#39;].values[0]</span>
    <span class="c1">#</span>
    <span class="c1">#plt.plot([&#39;2017-07-01&#39;, &#39;2021-07-01&#39;], [500, 500], &#39;k-&#39;, lw=2)</span>
    <span class="c1">#ax.annotate(&quot;test&quot;, xy=(&#39;2017-07-01&#39;,600))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">df_meta</span><span class="p">[</span><span class="s1">&#39;Tot_pages&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="n">name</span> <span class="o">=</span> <span class="n">prefix_title</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">df_meta</span><span class="o">.</span><span class="n">Title</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
      <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">title_x_positions</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="o">+</span><span class="mi">50</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
   
    <span class="n">y</span> <span class="o">=</span> <span class="mi">3495</span>   
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;In Search of Lost Time - The END&#39;</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">title_x_positions</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="o">+</span><span class="mi">50</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Total Pages&#39;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="c1">## rotation, etc... </span>
    
    <span class="c1"># Define the date format</span>
    <span class="n">date_form</span> <span class="o">=</span> <span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;%Y-%m&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">date_form</span><span class="p">)</span>
    <span class="c1"># Ensure ticks fall once every other week (interval=2) </span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">WeekdayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">13</span><span class="p">))</span>

    
    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span>
        <span class="s1">&#39;&quot;Stove Ownership&quot; from xkcd by Randall Monroe&#39;</span><span class="p">,</span>
        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/d078f49f7bae40f319856d46e8d6a20c16b363f3a960602dffb07f5bf4b05b09.png" src="../../../_images/d078f49f7bae40f319856d46e8d6a20c16b363f3a960602dffb07f5bf4b05b09.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 341 entries, 0 to 340
Data columns (total 4 columns):
 #   Column     Non-Null Count  Dtype         
---  ------     --------------  -----         
 0   dt         341 non-null    datetime64[ns]
 1   page_orig  341 non-null    float64       
 2   offset     341 non-null    int64         
 3   page       341 non-null    float64       
dtypes: datetime64[ns](1), float64(2), int64(1)
memory usage: 10.8 KB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>page_orig</th>
      <th>offset</th>
      <th>page</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-01-25</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-01-26</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-01-27</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-01-28</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-01-29</td>
      <td>3.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>336</th>
      <td>2022-12-27</td>
      <td>0.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>337</th>
      <td>2022-12-28</td>
      <td>0.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>338</th>
      <td>2022-12-29</td>
      <td>0.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>339</th>
      <td>2022-12-30</td>
      <td>0.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>340</th>
      <td>2022-12-31</td>
      <td>0.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>341 rows × 4 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="mi">110</span><span class="p">:]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>page</th>
      <th>offset</th>
      <th>page1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>110</th>
      <td>2022-05-15</td>
      <td>88.0</td>
      <td>3</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>111</th>
      <td>2022-05-16</td>
      <td>112.0</td>
      <td>3</td>
      <td>109.0</td>
    </tr>
    <tr>
      <th>112</th>
      <td>2022-05-17</td>
      <td>140.0</td>
      <td>3</td>
      <td>137.0</td>
    </tr>
    <tr>
      <th>113</th>
      <td>2022-05-18</td>
      <td>163.0</td>
      <td>3</td>
      <td>160.0</td>
    </tr>
    <tr>
      <th>114</th>
      <td>2022-05-19</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>115</th>
      <td>2022-05-20</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>116</th>
      <td>2022-05-21</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>117</th>
      <td>2022-05-22</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>118</th>
      <td>2022-05-23</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>119</th>
      <td>2022-05-24</td>
      <td>0.0</td>
      <td>3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>120</th>
      <td>2022-05-25</td>
      <td>10.0</td>
      <td>3</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>121</th>
      <td>2022-05-26</td>
      <td>10.0</td>
      <td>3</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>122</th>
      <td>2022-05-27</td>
      <td>10.0</td>
      <td>3</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>123</th>
      <td>2022-05-28</td>
      <td>10.0</td>
      <td>3</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>124</th>
      <td>2022-05-29</td>
      <td>12.0</td>
      <td>3</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>125</th>
      <td>2022-05-30</td>
      <td>12.0</td>
      <td>3</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>126</th>
      <td>2022-05-31</td>
      <td>12.0</td>
      <td>3</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>127</th>
      <td>2022-06-01</td>
      <td>16.0</td>
      <td>3</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>128</th>
      <td>2022-06-02</td>
      <td>16.0</td>
      <td>3</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>129</th>
      <td>2022-06-03</td>
      <td>16.0</td>
      <td>3</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>130</th>
      <td>2022-06-04</td>
      <td>32.0</td>
      <td>3</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>131</th>
      <td>2022-06-05</td>
      <td>32.0</td>
      <td>3</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>132</th>
      <td>2022-06-06</td>
      <td>32.0</td>
      <td>3</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>133</th>
      <td>2022-06-07</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>134</th>
      <td>2022-06-08</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>135</th>
      <td>2022-06-09</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>136</th>
      <td>2022-06-10</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>137</th>
      <td>2022-06-11</td>
      <td>62.0</td>
      <td>3</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>138</th>
      <td>2022-06-12</td>
      <td>88.0</td>
      <td>3</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>139</th>
      <td>2022-06-13</td>
      <td>88.0</td>
      <td>3</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>140</th>
      <td>2022-06-14</td>
      <td>88.0</td>
      <td>3</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>141</th>
      <td>2022-06-15</td>
      <td>88.0</td>
      <td>3</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>142</th>
      <td>2022-06-16</td>
      <td>110.0</td>
      <td>3</td>
      <td>107.0</td>
    </tr>
    <tr>
      <th>143</th>
      <td>2022-06-17</td>
      <td>110.0</td>
      <td>3</td>
      <td>107.0</td>
    </tr>
    <tr>
      <th>144</th>
      <td>2022-06-18</td>
      <td>110.0</td>
      <td>3</td>
      <td>107.0</td>
    </tr>
    <tr>
      <th>145</th>
      <td>2022-06-19</td>
      <td>137.0</td>
      <td>3</td>
      <td>134.0</td>
    </tr>
    <tr>
      <th>146</th>
      <td>2022-06-20</td>
      <td>168.0</td>
      <td>3</td>
      <td>165.0</td>
    </tr>
    <tr>
      <th>147</th>
      <td>2022-06-21</td>
      <td>203.0</td>
      <td>3</td>
      <td>200.0</td>
    </tr>
    <tr>
      <th>148</th>
      <td>2022-06-22</td>
      <td>220.0</td>
      <td>3</td>
      <td>217.0</td>
    </tr>
    <tr>
      <th>149</th>
      <td>2022-06-23</td>
      <td>246.0</td>
      <td>3</td>
      <td>243.0</td>
    </tr>
    <tr>
      <th>150</th>
      <td>2022-06-24</td>
      <td>280.0</td>
      <td>3</td>
      <td>277.0</td>
    </tr>
    <tr>
      <th>151</th>
      <td>2022-06-25</td>
      <td>306.0</td>
      <td>3</td>
      <td>303.0</td>
    </tr>
    <tr>
      <th>152</th>
      <td>2022-06-26</td>
      <td>306.0</td>
      <td>3</td>
      <td>303.0</td>
    </tr>
    <tr>
      <th>153</th>
      <td>2022-06-27</td>
      <td>320.0</td>
      <td>3</td>
      <td>317.0</td>
    </tr>
    <tr>
      <th>154</th>
      <td>2022-06-28</td>
      <td>354.0</td>
      <td>3</td>
      <td>351.0</td>
    </tr>
    <tr>
      <th>155</th>
      <td>2022-06-29</td>
      <td>378.0</td>
      <td>3</td>
      <td>375.0</td>
    </tr>
    <tr>
      <th>156</th>
      <td>2022-06-30</td>
      <td>15.0</td>
      <td>3</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>157</th>
      <td>2022-07-01</td>
      <td>29.0</td>
      <td>3</td>
      <td>26.0</td>
    </tr>
    <tr>
      <th>158</th>
      <td>2022-07-02</td>
      <td>41.0</td>
      <td>3</td>
      <td>38.0</td>
    </tr>
    <tr>
      <th>159</th>
      <td>2022-07-03</td>
      <td>72.0</td>
      <td>3</td>
      <td>69.0</td>
    </tr>
    <tr>
      <th>160</th>
      <td>2022-07-04</td>
      <td>94.0</td>
      <td>3</td>
      <td>91.0</td>
    </tr>
    <tr>
      <th>161</th>
      <td>2022-07-05</td>
      <td>123.0</td>
      <td>3</td>
      <td>120.0</td>
    </tr>
    <tr>
      <th>162</th>
      <td>2022-07-06</td>
      <td>123.0</td>
      <td>3</td>
      <td>120.0</td>
    </tr>
    <tr>
      <th>163</th>
      <td>2022-07-07</td>
      <td>152.0</td>
      <td>3</td>
      <td>149.0</td>
    </tr>
    <tr>
      <th>164</th>
      <td>2022-07-08</td>
      <td>174.0</td>
      <td>3</td>
      <td>171.0</td>
    </tr>
    <tr>
      <th>165</th>
      <td>2022-07-09</td>
      <td>218.0</td>
      <td>3</td>
      <td>215.0</td>
    </tr>
    <tr>
      <th>166</th>
      <td>2022-07-10</td>
      <td>7.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>167</th>
      <td>2022-07-11</td>
      <td>16.0</td>
      <td>7</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>168</th>
      <td>2022-07-12</td>
      <td>25.0</td>
      <td>7</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>169</th>
      <td>2022-07-13</td>
      <td>26.0</td>
      <td>7</td>
      <td>19.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="mi">180</span><span class="p">:]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>page</th>
      <th>offset</th>
      <th>page1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>180</th>
      <td>2022-07-24</td>
      <td>142.0</td>
      <td>7</td>
      <td>135.0</td>
    </tr>
    <tr>
      <th>181</th>
      <td>2022-07-25</td>
      <td>156.0</td>
      <td>7</td>
      <td>149.0</td>
    </tr>
    <tr>
      <th>182</th>
      <td>2022-07-26</td>
      <td>170.0</td>
      <td>7</td>
      <td>163.0</td>
    </tr>
    <tr>
      <th>183</th>
      <td>2022-07-27</td>
      <td>184.0</td>
      <td>7</td>
      <td>177.0</td>
    </tr>
    <tr>
      <th>184</th>
      <td>2022-07-28</td>
      <td>197.0</td>
      <td>7</td>
      <td>190.0</td>
    </tr>
    <tr>
      <th>185</th>
      <td>2022-07-29</td>
      <td>197.0</td>
      <td>7</td>
      <td>190.0</td>
    </tr>
    <tr>
      <th>186</th>
      <td>2022-07-30</td>
      <td>211.0</td>
      <td>7</td>
      <td>204.0</td>
    </tr>
    <tr>
      <th>187</th>
      <td>2022-07-31</td>
      <td>214.0</td>
      <td>7</td>
      <td>207.0</td>
    </tr>
    <tr>
      <th>188</th>
      <td>2022-08-01</td>
      <td>228.0</td>
      <td>7</td>
      <td>221.0</td>
    </tr>
    <tr>
      <th>189</th>
      <td>2022-08-02</td>
      <td>242.0</td>
      <td>7</td>
      <td>235.0</td>
    </tr>
    <tr>
      <th>190</th>
      <td>2022-08-03</td>
      <td>254.0</td>
      <td>7</td>
      <td>247.0</td>
    </tr>
    <tr>
      <th>191</th>
      <td>2022-08-04</td>
      <td>254.0</td>
      <td>7</td>
      <td>247.0</td>
    </tr>
    <tr>
      <th>192</th>
      <td>2022-08-05</td>
      <td>254.0</td>
      <td>7</td>
      <td>247.0</td>
    </tr>
    <tr>
      <th>193</th>
      <td>2022-08-06</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>194</th>
      <td>2022-08-07</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>195</th>
      <td>2022-08-08</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>196</th>
      <td>2022-08-09</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>197</th>
      <td>2022-08-10</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>198</th>
      <td>2022-08-11</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>199</th>
      <td>2022-08-12</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>200</th>
      <td>2022-08-13</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>201</th>
      <td>2022-08-14</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>202</th>
      <td>2022-08-15</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>203</th>
      <td>2022-08-16</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>204</th>
      <td>2022-08-17</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>205</th>
      <td>2022-08-18</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>206</th>
      <td>2022-08-19</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>207</th>
      <td>2022-08-20</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>208</th>
      <td>2022-08-21</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>209</th>
      <td>2022-08-22</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>210</th>
      <td>2022-08-23</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>211</th>
      <td>2022-08-24</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>212</th>
      <td>2022-08-25</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>213</th>
      <td>2022-08-26</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>214</th>
      <td>2022-08-27</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>215</th>
      <td>2022-08-28</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>216</th>
      <td>2022-08-29</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>217</th>
      <td>2022-08-30</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>218</th>
      <td>2022-08-31</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>219</th>
      <td>2022-09-01</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>220</th>
      <td>2022-09-02</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>221</th>
      <td>2022-09-03</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>222</th>
      <td>2022-09-04</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>223</th>
      <td>2022-09-05</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>224</th>
      <td>2022-09-06</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>225</th>
      <td>2022-09-07</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>226</th>
      <td>2022-09-08</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>227</th>
      <td>2022-09-09</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>228</th>
      <td>2022-09-10</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>229</th>
      <td>2022-09-11</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>230</th>
      <td>2022-09-12</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>231</th>
      <td>2022-09-13</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>232</th>
      <td>2022-09-14</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>233</th>
      <td>2022-09-15</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>234</th>
      <td>2022-09-16</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>235</th>
      <td>2022-09-17</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>236</th>
      <td>2022-09-18</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>237</th>
      <td>2022-09-19</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>238</th>
      <td>2022-09-20</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>239</th>
      <td>2022-09-21</td>
      <td>254.0</td>
      <td>7</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>

<div class="section">
   
</div>

            </article>
            
<!-- Add a comment box underneath the page's content -->
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://abocci.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Data Collection
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hardcoded-book-metadata">
     Hardcoded book metadata
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#complete-the-raw-dataset">
     Complete the raw dataset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#make-the-plot">
   Make the plot
  </a>
 </li>
</ul>

</nav>
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022, Andrea Bocci.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>